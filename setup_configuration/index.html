<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://webmev.tm4.org/setup_configuration/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Configuration - WebMeV REST API</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../style.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Configuration";
        var mkdocs_page_input_path = "setup_configuration.md";
        var mkdocs_page_url = "/setup_configuration/";
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> WebMeV REST API
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../general_architecture/">Architecture</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Installation and Setup</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../install/">Install</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">Configuration</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#email-backends">Email backends</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#about-storage-backends">About storage backends</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../management_commands/">Management commands</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">API</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../api/">Intro and core concepts</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="#">Data Structures</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="#">Resources</a>
    <ul>
                <li class="toctree-l3"><a class="reference internal" href="../resources/">General info</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../resource_types/">Resource types</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../resource_metadata/">Resource metadata</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../operation_resources/">Operation-associated resources</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../attributes/">Attributes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../elements/">Observations and Features</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../observation_and_feature_sets/">ObservationSet and FeatureSets</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../workspaces/">Workspaces</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../metadata/">Workspace metadata</a>
                </li>
    </ul>
                  </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../auth/">Authentication</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../operations/">Operation concepts</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../creating_analyses/">Creating new analyses/operations</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../example_workflow/">Workflow and analysis concepts</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../public_data/">Creating and managing public data</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">WebMeV REST API</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Installation and Setup &raquo;</li>
      <li>Configuration</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/web-mev/mev-backend/edit/master/docs/setup_configuration.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="configuration-options-and-parameters"><a class="toclink" href="#configuration-options-and-parameters">Configuration options and parameters</a></h2>
<p>As described in the installation section, the WebMeV API depends on environment variables to configure the application.</p>
<p>For local development with Vagrant, this may require setting some environment variables before running <code>vagrant up</code>. See <code>Vagrantfile</code> for details. In most cases, you do not need to modify anything or set environment variables. </p>
<p>For a cloud-based deployment with terraform, you will need to create a <code>terraform.tfvars</code> file and enter the config parameters. See <code>deployment-aws/terraform/README.md</code> for details.</p>
<p><strong>Comments about configuration parameters:</strong></p>
<p>While most variables are sane default, note the following:</p>
<ul>
<li>
<p><code>admin_email_csv</code>: This a comma-delimited string of the emails for administrators. Note that this does <em>not</em> create Django superusers, but rather provides a set of email addresses who will receive notifications (about errors, feedback, etc.)</p>
</li>
<li>
<p><code>enable_remote_job_runners</code>: The value "yes" enables the remote job runners like Cromwell. If any other value, then we will not allow remote jobs to be executed, which limits the types of analyses that can be run.</p>
</li>
<li>
<p><code>frontend_domain</code>: This is not strictly necessary, but will allow a frontend application located on another domain to interact with the API. Otherwise, Django will reject the request due to same-origin CORS policies. Do NOT include protocol.</p>
</li>
<li>
<p><code>additional_cors_origins</code>: This will allow additional frontend applications to connect. For instance, if you would like your local development frontend (accessible at localhost:4200) to connect to this deployment, you can add "http://localhost:4200". This is a comma-delimited string, so you can have multiple values. Be sure to include the http protocol, as shown.</p>
</li>
<li>
<p><code>storage_location</code>: This is either "remote" or "local". Using "remote" makes use of remote bucket storage. The "local" setting stores files on the server, which can be inappropriate for working with larger files since it requires larger hard disk space. <strong>For cloud deployments, just set this to "remote".</strong></p>
</li>
<li>
<p><code>from_email</code>: We uses AWS simple email service (SES) to send emails. This sets to "from" field in the emails. It's helpful to set this to something like <code>"WebMEV &lt;noreply@mail.webmev.tm4.org&gt;"</code> so that users will know not to reply directly to the email.</p>
</li>
<li>
<p><code>sentry_url</code>: Only necessary to use if you are using a Sentry issue-tracker. If not using Sentry, then you can just leave this as an empty string.</p>
</li>
</ul>
<h3 id="email-backends"><a class="toclink" href="#email-backends">Email backends<a name="email"></a></a></h3>
<p>The "dev" settings (<code>mev/settings_dev.py</code>) use the default "console" email backend. This means that for development purposes, no emails will be sent. If you are deploying into a cloud environment, but want that enabled, alter that file OR just simply declare your dev environment as production. There's nothing particularly special about the "production" designation. It's effectively only production if it's properly associated with our "live" URL.</p>
<p>The "production" email uses AWS SES. Terraform will create an IAM user with appropriate permissions and the user/host/etc will automatically be linked up with the Django application during the provisioning.</p>
<h3 id="about-storage-backends"><a class="toclink" href="#about-storage-backends">About storage backends</a></h3>
<p>Storage of user files can be either local (on the WebMEV server) or in some remote filesystem (e.g. in an AWS S3 storage bucket).  To abstract this, we use the <code>django-storages</code> library for a common interface. For cloud deployments, we always use the "remote" setting, which corresponds to S3 storage. This setting is also required if you are planning to use the Cromwell (or other) remote job runner. Since Cromwell needs access to the files, we must be using bucket storage (barring some other, more complex setup).</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../install/" class="btn btn-neutral float-left" title="Install"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../management_commands/" class="btn btn-neutral float-right" title="Management commands">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/web-mev/mev-backend" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../install/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../management_commands/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
